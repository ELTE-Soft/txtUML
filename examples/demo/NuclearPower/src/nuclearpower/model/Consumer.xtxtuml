package nuclearpower.model;

import nuclearpower.model.assocination.PlantConsumerAssociation;
import nuclearpower.model.assocination.ConsumerUIAssociation;

class Consumer {
	initial Init;
	state Off{
		entry{
			this->(ConsumerUIAssociation.ui).selectAny().gui.consumerStateChanged("Off");
		}
	};
	state On{
		entry{
			this->(ConsumerUIAssociation.ui).selectAny().gui.consumerStateChanged("On");
		}
	};
	
	transition Initialize {
		from Init;
		to Off;
	}
	
	transition SwitchOn {
		from Off;
		to On;
		trigger ConsumerButtonPressed;
		effect {
			NuclearPowerPlant plant = this->(PlantConsumerAssociation.plant).selectAny();
			send new SwitchOnPlant() to plant;
		}
	}
	
	transition SwitchOff {
		from On;
		to Off;
		trigger ConsumerButtonPressed;
		effect {
			NuclearPowerPlant plant = this->(PlantConsumerAssociation.plant).selectAny();
			send new SwitchOffPlant() to plant;
		}
	}
}